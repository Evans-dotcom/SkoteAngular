<form (ngSubmit)="save()" class="row g-3">
  <!-- Item Name -->
  <div class="col-md-4">
    <label for="itemName" class="form-label">Item Name</label>
    <input
      type="text"
      id="itemName"
      [(ngModel)]="selected.itemName"
      name="itemName"
      class="form-control"
      placeholder="e.g. Stationery, Equipment"
      required
    />
  </div>

  <!-- Unit -->
  <div class="col-md-4">
    <label for="unit" class="form-label">Unit</label>
    <input
      type="text"
      id="unit"
      [(ngModel)]="selected.unit"
      name="unit"
      class="form-control"
      placeholder="e.g. Pieces, Litres, Kg"
      required
    />
  </div>

  <!-- Quantity -->
  <div class="col-md-4">
    <label for="quantity" class="form-label">Quantity</label>
    <input
      type="number"
      id="quantity"
      [(ngModel)]="selected.quantity"
      name="quantity"
      class="form-control"
      placeholder="Quantity"
      required
    />
  </div>

  <!-- Unit Cost -->
  <div class="col-md-4">
    <label for="unitCost" class="form-label">Unit Cost</label>
    <input
      type="number"
      id="unitCost"
      [(ngModel)]="selected.unitCost"
      name="unitCost"
      class="form-control"
      placeholder="Unit Cost"
      required
    />
  </div>

  <!-- Total Value (readonly, auto-calculated) -->
  <div class="col-md-4">
    <label for="totalValue" class="form-label">Total Value</label>
    <input
      type="number"
      id="totalValue"
      [(ngModel)]="selected.totalValue"
      name="totalValue"
      class="form-control"
      [value]="selected.quantity * selected.unitCost"
      readonly
    />
  </div>

  <!-- Location -->
  <div class="col-md-4">
    <label for="location" class="form-label">Location</label>
    <input
      type="text"
      id="location"
      [(ngModel)]="selected.location"
      name="location"
      class="form-control"
      placeholder="Location"
      required
    />
  </div>

  <!-- Department -->
  <div class="col-md-6">
    <label for="department" class="form-label">Department</label>
    <select
      id="department"
      class="form-select"
      [(ngModel)]="selected.department"
      name="department"
      (change)="onDepartmentChange()"
      required
    >
      <option value="">Select Department</option>
      <option *ngFor="let dept of (departments | keyvalue)" [value]="dept.key">
        {{ dept.key }}
      </option>
    </select>
  </div>

  <!-- Department Unit -->
  <div class="col-md-6">
    <label for="departmentUnit" class="form-label">Department Unit</label>
    <select
      id="departmentUnit"
      class="form-select"
      [(ngModel)]="selected.departmentUnit"
      name="departmentUnit"
      required
      [disabled]="!availableUnits.length"
    >
      <option value="">Select Unit</option>
      <option *ngFor="let unit of availableUnits" [value]="unit">{{ unit }}</option>
    </select>
  </div>

  <!-- Remarks -->
  <div class="col-md-12">
    <label for="remarks" class="form-label">Remarks</label>
    <textarea
      id="remarks"
      [(ngModel)]="selected.remarks"
      name="remarks"
      class="form-control"
      placeholder="Remarks about this stock (optional)"
      rows="2"
    ></textarea>
  </div>

  <!-- Buttons -->
  <div class="col-md-12 text-end">
    <button type="submit" class="btn btn-success me-2">
      <i class="fa fa-save me-1"></i> {{ isEdit ? 'Update' : 'Create' }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="resetForm()">
      <i class="fa fa-times me-1"></i> Clear
    </button>
  </div>
</form>
